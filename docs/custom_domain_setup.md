# Azure DNSを使用したカスタムドメイン設定手順

Azure Static Web Apps に Azure DNS を使用してカスタムドメイン（例: `postcodejp.com`）を割り当てる手順です。

## 前提条件
- 独自ドメインを取得済みであること（お名前.com、GoDaddy、AWS Route53などで購入済み）
- Azure サブスクリプションを持っていること

## 手順 1: Azure DNS ゾーンの作成

1. **Azure Portal** にログインします。
2. 検索バーで「**DNS ゾーン (DNS zones)**」を検索し、選択します。
3. **「＋作成 (Create)」** をクリックします。
4. 以下の項目を入力して作成します：
   - **サブスクリプション**: お使いのサブスクリプション
   - **リソースグループ**: 既存のもの（`postcodejp`関連など）または新規作成
   - **名前**: 取得したドメイン名（例: `postcodejp.com`）
5. **「確認と作成」** -> **「作成」** をクリックします。

## 手順 2: ネームサーバーの変更（ドメインレジストラ側）

1. 作成された **DNS ゾーン** のリソースを開きます。
2. 「概要」ページに表示されている **ネームサーバー (Name servers)** のリスト（通常4つあります）をコピーします。
   - 例: `ns1-01.azure-dns.com` ...
3. ドメインを購入した管理画面（お名前.comなど）にログインします。
4. 対象ドメインのネームサーバー設定を、コピーした **Azure DNS のネームサーバー** に変更します。
   - ※反映には数時間～最大48時間かかる場合があります。

## 手順 3: Azure Static Web Apps でのカスタムドメイン設定

1. **Azure Portal** で **Azure Static Web Apps** のリソース（`ashy-beach-...`）を開きます。
2. 左メニューの **「カスタム ドメイン (Custom domains)」** を選択します。
3. **「＋追加 (Add)」** をクリックし、**「Azure DNS 上のカスタム ドメイン (Custom domain on Azure DNS)」** を選択します。
4. **「DNS ゾーン」** ドロップダウンから、手順1で作成したゾーンを選択します。
5. **「追加 (Add)」** をクリックします。

## 手順 4: レコードの設定確認

Static Web Apps と DNS ゾーンの連携が完了すると、自動的に必要な CNAME レコード（または A レコード）が Azure DNS ゾーンに追加されます。

1. **Azure DNS ゾーン** のリソースに戻ります。
2. `www` やルートドメイン (`@`) などのレコードが追加されていることを確認します。

## 手順 5: アクセス確認

ブラウザで設定したカスタムドメイン（例: `https://postcodejp.com`）にアクセスし、サイトが表示されれば完了です。
SSL証明書は Azure Static Web Apps によって自動的に発行・更新されます（無料）。
